{% extends 'base.html.twig' %}

{% block body %}
	<div class="container mt-4">
		<h1>Modifier la figure</h1>
		{{ form_start(form) }}

		{{ form_errors(form)}}

		<div class="row">
			<div class="col-lg-6">
				{{ form_row(form.name)}}
				{{ form_row(form.description)}}
				{{ form_row(form.category)}}
			</div>
			<div class="col-lg-6">
				<h3>Photos</h3>
				<div class="row">
					{% for picture in trick.pictures %}
						<div class="col-6 col-md-4">
							<p><img src="{{ src_trick_base ~ picture.name }}" alt="" class="img-fluid"></p>
							<p><input name="delete_pictures[{{ picture.id }}]" type="checkbox">
								Supprimer</p>
						</div>
					{% else %}
						Pas de photo
					{% endfor %}
				</div>
				{{ form_row(form.pictures)}}

				<h3>Vidéos</h3>
				<div class="row">
					{% for video in trick.videos %}
						<div class="col-4">
							<div class="embed-responsive embed-responsive-16by9">
								<iframe class="embed-responsive-item" src="{{ video.url }}" allowfullscreen></iframe>
							</div>
							<p><input name="delete_videos[{{ video.id }}]" type="checkbox">
								Supprimer</p>
						</div>
					{% else %}
						<div class="col">Pas de video</div>
					{% endfor %}
				</div>
				<div class="input_fields_wrap">
					<a href="#" class="add_field_button">Ajouter une vidéo</a>
				</div>
			</div>
		</div>

		<button class="btn btn-primary float-left mr-2">Enregistrer</button>

		{{ form_end(form) }}
		{% if is_granted('ENTITY_DELETE', trick) %}
			{% include "trick/_delete_form.html.twig" %}
		{% endif %}
	</div>
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('asset/js/form.js') }}"></script>
{% endblock %}
